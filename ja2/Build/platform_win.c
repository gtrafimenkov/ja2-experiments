// Implementation of the platform layer on Windows.

#include <windows.h>

#include "platform.h"

/////////////////////////////////////////////////////////////////////////////////
//
/////////////////////////////////////////////////////////////////////////////////

BOOLEAN Plat_GetExecutableDirectory(char *buf, u16 bufSize) {
  char ModuleFilename[100];
  UINT32 cnt;

  if(GetModuleFileName(NULL, ModuleFilename, sizeof(ModuleFilename)) == 0) {
    return FALSE;
  }

  // Now get directory
  strncpy(buf, ModuleFilename, bufSize);
  buf[bufSize - 1] = 0;

  for (cnt = strlen(buf) - 1; cnt >= 0; cnt--) {
    if (buf[cnt] == '\\') {
      buf[cnt] = '\0';
      break;
    }
  }

  return (TRUE);
}

/////////////////////////////////////////////////////////////////////////////////
//
/////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////
//
/////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////
//
/////////////////////////////////////////////////////////////////////////////////
